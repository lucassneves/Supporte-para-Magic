<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" id="meta-theme-color" content="#1a0f0f">
    <title>Status da Criatura - Mobile</title>
    <style>
        :root {
            --primary-color: #ff4500; /* Laranja padr√£o */
            --bg-button: #2b1717;
            --glow-color: rgba(255, 69, 0, 0.4);
            --bg-app: #1a0f0f;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-app);
            color: var(--primary-color);
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            justify-content: center;
            align-items: center;
            user-select: none;
            -webkit-user-select: none;
            overflow: hidden;
            touch-action: manipulation; /* Bloqueia zoom duplo no iOS */
        }

        /* Bot√£o de Trocar Cor no canto superior direito */
        .theme-btn {
            position: absolute;
            top: 3vh;
            right: 5vw;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            padding: 0;
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            box-shadow: none;
            z-index: 10;
        }

        .title {
            font-size: 5vw;
            color: #888;
            margin-bottom: 3vh;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }

        .power-display {
            font-size: clamp(4rem, 20vw, 8rem); /* Responsivo e seguro para n√∫meros altos */
            font-weight: bold;
            text-shadow: 0 0 20px var(--glow-color);
            margin: 2vh 0 4vh 0;
            transition: transform 0.05s ease-in-out, text-shadow 0.3s ease;
            white-space: nowrap;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 90vw;
            max-width: 400px;
        }

        button {
            background-color: var(--bg-button);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            font-size: 8vw;
            padding: 25px 0;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.6);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        @media (min-width: 500px) {
            .title { font-size: 1.5rem; }
            button { font-size: 2.5rem; padding: 20px 0; }
            .theme-btn { right: 20px; top: 20px; }
        }

        button:active {
            background-color: var(--primary-color);
            color: var(--bg-app);
            transform: scale(0.95);
        }

        .reset-container {
            margin-top: 5vh;
            width: 90vw;
            max-width: 400px;
        }

        .reset-btn {
            font-size: 1.2rem;
            width: 100%;
            height: 60px;
            padding: 0;
            border-color: #555;
            color: #aaa;
            background-color: transparent;
        }

        .reset-btn:active {
            background-color: #555;
            color: #fff;
        }
    </style>
</head>
<body>

    <button class="theme-btn" onclick="changeTheme()">üé®</button>

    <div class="title">Status da Criatura<br>Power / Toughness</div>

    <div class="power-display" id="power">0 / 0</div>

    <div class="controls">
        <button onclick="changeStats(1)">+1</button>
        <button onclick="changeStats(10)">+10</button>
        <button onclick="changeStats(-1)">-1</button>
        <button onclick="changeStats(-10)">-10</button>
    </div>
    
    <div class="reset-container">
        <button class="reset-btn" onclick="resetStats()">Resetar Status</button>
    </div>

    <script>
        let stats = 0;
        const powerDisplay = document.getElementById('power');
        let audioCtx;
        let wakeLock = null;

        // Gerenciamento de Cores (Laranja, Verde, Azul, Branco)
        const themes = [
            { primary: '#ff4500', bgBtn: '#2b1717', glow: 'rgba(255, 69, 0, 0.4)' }, // Laranja
            { primary: '#00cc44', bgBtn: '#00260d', glow: 'rgba(0, 204, 68, 0.4)' }, // Verde
            { primary: '#0099ff', bgBtn: '#001a33', glow: 'rgba(0, 153, 255, 0.4)' }, // Azul
            { primary: '#ffffff', bgBtn: '#222222', glow: 'rgba(255, 255, 255, 0.4)' }  // Branco
        ];
        let currentThemeIndex = 0;

        function changeTheme() {
            currentThemeIndex = (currentThemeIndex + 1) % themes.length;
            const t = themes[currentThemeIndex];
            
            document.documentElement.style.setProperty('--primary-color', t.primary);
            document.documentElement.style.setProperty('--bg-button', t.bgBtn);
            document.documentElement.style.setProperty('--glow-color', t.glow);
            
            playFeedback();
        }

        // Bloqueio de tela (Wake Lock) para a tela n√£o apagar durante o jogo
        async function requestWakeLock() {
            try {
                if ('wakeLock' in navigator) {
                    wakeLock = await navigator.wakeLock.request('screen');
                }
            } catch (err) {
                console.log('Wake Lock falhou:', err);
            }
        }
        
        // Solicita o Wake Lock assim que o usu√°rio clica na tela pela primeira vez
        document.body.addEventListener('click', requestWakeLock, { once: true });
        document.addEventListener('visibilitychange', () => {
            if (wakeLock !== null && document.visibilityState === 'visible') {
                requestWakeLock();
            }
        });

        function playFeedback() {
            // Vibra√ß√£o
            if (navigator.vibrate) {
                navigator.vibrate(40);
            }

            // Som Sint√©tico mais alto e n√≠tido
            try {
                if (!audioCtx) {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                // Usando 'triangle' ou 'square' o som fica muito mais aud√≠vel em celulares
                oscillator.type = 'triangle'; 
                oscillator.frequency.setValueAtTime(300, audioCtx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.05);
                
                // Volume aumentado para 3.0 para garantir impacto
                gainNode.gain.setValueAtTime(3.0, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.05);
                
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.05);
            } catch (e) {
                console.log("√Åudio n√£o suportado");
            }
        }

        function changeStats(amount) {
            stats += amount;
            if (stats < 0) stats = 0;
            
            updateDisplay();
            playFeedback();
            
            powerDisplay.style.transform = 'scale(1.1)';
            setTimeout(() => {
                powerDisplay.style.transform = 'scale(1)';
            }, 50);
        }

        function resetStats() {
            if(confirm("Deseja zerar os status?")) {
                stats = 0;
                updateDisplay();
                playFeedback();
            }
        }

        function updateDisplay() {
            powerDisplay.innerText = stats + " / " + stats;
        }
    </script>
</body>
</html>
